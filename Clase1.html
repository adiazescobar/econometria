<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>An√°lisis de Secciones Transversales</title>
    <meta charset="utf-8" />
    <meta name="author" content="Ana Mar√≠a D√≠az" />
    <script src="libs/header-attrs-2.23/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/rladies-fonts.css" rel="stylesheet" />
    <link href="libs/tile-view-0.2.6/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view-0.2.6/tile-view.js"></script>
    <script src="libs/xaringanExtra_fit-screen-0.2.6/fit-screen.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="mi-tema.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# An√°lisis de Secciones Transversales
]
.subtitle[
## Microeconom√≠a Aplicada
]
.author[
### Ana Mar√≠a D√≠az
]

---

class: inverse, middle




---
class: clear
name: schedule

## Hoy

- Bienvenidos, reglas de juego
- Fundamentos de investigaci√≥n: *¬øPor qu√© estamos aqu√≠?* .grey-vlight[*MHE*: Prefacio y Cap√≠tulo 1]
- Nuestra clase: *¬øQu√© estamos haciendo?*

## Pr√≥ximamente

- Aprender m√°s .mono[Stata]: ¬°Primer Taller!
- Revisar t√©cnicas y desarrollar intuici√≥n para causalidad e inferencia.


## A largo plazo

.hi[Objetivo:] Profundizar en la comprensi√≥n y la intuici√≥n para la causalidad y la inferencia.

---

---

name: why

## ¬øPor qu√© estamos aqu√≠?

--

- .hi[Investigaci√≥n econ√≥mica]
--
.hi[:] Comprender los comportamientos humanos, sociales y/o econ√≥micos.

--

- .hi[Maestr√≠a]
--
.hi[:] Aprender m√©todos, herramientas, habilidades e intuici√≥n necesarios para la investigaci√≥n.

--

- .hi[Econometr√≠a (Aplicada)]
--
.hi[:] Construir un conjunto de herramientas de .pink[*m√©todos emp√≠ricos*, herramientas y habilidades] que combinan datos y conocimientos estad√≠sticos para probar y/o medir teor√≠as y pol√≠ticas.

--

- .hi[T√∫]
--
.hi[:] Deber√≠as estar pensando en esta pregunta a lo largo de tu programa/trabajo/vida.

---
# Esta clase

Aunque las calificaciones no son muy importantes .bigger[ü§∑], son necesarias.

- 25% Parcial 1
- 25% Parcial 2
- 20% Talleres Casa
- 5% Talleres Clase
- 25% Trabajo Final
-- Primera entrega. (10%) Presentaci√≥n de la idea de investigaci√≥n
Segunda entrega (20%). 5 p√°ginas de introducci√≥n, an√°lisis descriptivo y descripci√≥n de la metodolog√≠a.
Entrega final (30%). Documento definitivo. 
Sustentaci√≥n.(40%) 

--

El material y las herramientas son fundamentales para **mucho** de lo que har√°s en el futuro.

--

.hi[Toma responsabilidad de tu educaci√≥n y carrera.]

- Comprom√©tete a dedicar el tiempo necesario.
- S√© proactivo y curioso.
- Ad√©ntrate en temas espec√≠ficos.
- Haz preguntas.
- Aprende.

---

## ¬øQu√© estamos haciendo?

.hi[P] ¬øCu√°l es la diferencia entre *econometr√≠a* y *ciencia de datos*?
--
&lt;br&gt;.hi[P].sub[.pink[v2]] ¬øHay algo especial acerca de la *econometr√≠a*?

--

.hi[R].pink[.sub[1/‚àû]] Causalidad.&lt;sup&gt;.smallest[üò∏]&lt;/sup&gt;

.footnote[
üò∏ Fuentes para esta Pregunta y Respuesta: [Dan Hammer](https://www.danham.me/r/about.html) y [Max Auffhammer](https://www.auffhammer.com/).
&lt;br&gt;.tran[blah]
]

--

La causalidad juega un *papel enorme* en la econometr√≠a aplicada moderna (especialmente en microeconom√≠a).

---
# Libros
layout: false
class: clear

.pull-left[
.hi-pink[Gu√≠a Pr√°ctica para la Evaluaci√≥n de Impacto]
&lt;br&gt;*Ximena Pe√±a y Raquel Bernal, 2008*
&lt;img src="img/libro1.jpg" width="50%" style="display: block; margin: auto;" /&gt;
]
.pull-right[
.b.red[Causal Inference: The Mixtape]
&lt;br&gt;*Scott Cunningham, 2021*
&lt;img src="img/libro2.jfif" width="50%" style="display: block; margin: auto;" /&gt;

Relativamente nuevo
&lt;br&gt;[Incluye](https://mixtape.scunning.com/index.html) R, Stata, and Python code.


]
---

layout: true

# Investigaci√≥n causal


---
# ¬øQu√© es Econom√≠a?

[https://PollEv.com/anamariadiaz707](https://PollEv.com/anamariadiaz707)

---

# ¬øQu√© es Econom√≠a?

[https://www.youtube.com/watch?v=iiYKRD8ochA](https://www.youtube.com/watch?v=iiYKRD8ochA)

.pull-left[
.b.blue[Oriana Bandeira]
&lt;img src="img/ORIANA.png" width="60%" style="display: block; margin: auto;" /&gt;
]

---
---

## Motivaci√≥n

&gt; En primer lugar, creemos que .pink[la investigaci√≥n emp√≠rica es m√°s valiosa cuando utiliza datos para responder preguntas causales espec√≠ficas, *como si* se tratara de un ensayo cl√≠nico aleatorizado.] Esta perspectiva moldea nuestro enfoque hacia la mayor√≠a de las preguntas de investigaci√≥n. En ausencia de un experimento real, buscamos comparaciones bien controladas y/o cuasiexperimentos naturales. Por supuesto, algunos dise√±os de investigaci√≥n cuasiexperimentales son m√°s convincentes que otros, pero .purple[los m√©todos econom√©tricos utilizados en estos estudios suelen ser bastante simples].

*Mostly Harmless Econometrics*, p. xii 

--

.pink[1\. Esta ideolog√≠a compara inherentemente la investigaci√≥n con ensayos cl√≠nicos aleatorizados.]



---
## Microeconometr√≠a

- Efectos Causales
- Formulaci√≥n de pol√≠ticas basadas en evidencia (CCTs, Incentivos, Costo-beneficio)
- Entender Mecanismos (teor√≠a econ√≥mica)

---

## Microeconometr√≠a - Pol√≠tica P√∫blica

- Directos:
  1. Asignaci√≥n eficiente de los recursos
  2. Mejorar la calidad, la eficiencia y la efectividad de las intervenciones
  3. Centrarse en resultados
  4. Establecer la existencia de efectos no esperados en la ejecuci√≥n de un programa
  5. Rendici√≥n de cuentas

- Indirectos:
  1. Debate p√∫blico

---

## Microeconometr√≠a - Teor√≠a Econ√≥mica

- Mejor y m√°s informaci√≥n
- Menos distracciones
- Mejor Dise√±o
- Discusi√≥n transparente del dise√±o
- Retroalimentaci√≥n

---

## Ejemplos Exitosos 1: Progresa (Oportunidades M√©xico) 1990

- Objetivos:
  - Ofrecer a los hogares pobres un ingreso monetario de corto plazo y crear incentivos para que los ni√±os aumenten su capital humano
- ¬øC√≥mo?
  - Transferencias condicionadas a que los ni√±os asistieran al colegio y visitaran regularmente un centro de salud

---

## Resultados Iniciales 2001

- El programa estaba bien focalizado y hab√≠a generado cambios importantes en el capital humano de los hogares
- Shultz(2004): Progresa aument√≥ la asistencia escolar en 0.7 a√±os
- Gertler(2001): La incidencia de enfermedades disminuy√≥ en un 23%

---

## Resultados Generales

![](img/pegado2)

---

## Resultados Generales

![](img/pegado1.png)

---

## Ejemplos Exitosos 2: Desparasitaci√≥n

![](img/ted1.png)

---

## Desparasitaci√≥n

![](img/ted2.png)

---

## Desparasitaci√≥n

![](img/ted3.png)

---

## Desparasitaci√≥n

![](img/ted4.png)

---

## Ejemplos Exitosos 3: El Parrillero

![](img/motos1.png)

---

## Ejemplos Exitosos 3: El Parrillero

![](img/motos2.png)

---

name: faqs

## Preguntas frecuentes de Angrist y Pischke&lt;sup&gt;.pink[‚Ä†]&lt;/sup&gt;

.footnote[
.pink[‚Ä†] Consulta *MHE*, cap√≠tulo 1.
.pink[‚Ä†‚Ä†] Estas preguntas son de [Reed Walker](https://w-reed-walker.com/).
]

1. ¬øCu√°l es la .hi[relaci√≥n causal de inter√©s]?

2. ¬øC√≥mo capturar√≠a un .hi[experimento ideal] este efecto causal de inter√©s?

3. ¬øCu√°l es tu .hi[estrategia de identificaci√≥n]?

4. ¬øCu√°l es tu .hi[modo de inferencia]?

--

***Nota:*** Otras preguntas tambi√©n importan para desarrollar una investigaci√≥n de calidad, *por ejemplo*,&lt;sup&gt;.pink[‚Ä†‚Ä†]&lt;/sup&gt;

- ¬øPor qu√© tu pregunta es .hi[importante/interesante]?
- ¬øPor qu√© la .hi[literatura actual] carece o es inexistente?
- ¬øC√≥mo propones .hi[avanzar en la literatura]?

---
name: faq1

## Pregunta frecuente.sub[1]: ¬øCu√°l es la relaci√≥n causal de inter√©s?

Los ejercicios descriptivos pueden ser [muy interesantes e importantes](https://www.opportunityatlas.org/), pero en la econometr√≠a aplicada moderna, .hi-purple[la causalidad es la reina].

**¬øPor qu√©?**

--

- Las relaciones causales .hi-purple[ponen a prueba directamente] las teor√≠as sobre c√≥mo funciona el mundo.

- Las relaciones causales nos proporcionan .hi-purple[*contrafactuales*].

--

üöß Si no puedes nombrar claramente y de manera concisa la relaci√≥n causal de inter√©s, es posible que no tengas realmente un proyecto de investigaci√≥n.

---

## Pregunta frecuente.sub[1]: ¬øCu√°l es la relaci√≥n causal de inter√©s?

*Algunos ejemplos cl√°sicos...*

**Trabajo y educaci√≥n**&lt;br&gt;¬øC√≥mo afecta un a√±o adicional de educaci√≥n a los salarios?

**Econom√≠a pol√≠tica y desarrollo**&lt;br&gt;¬øC√≥mo afectan las instituciones democr√°ticas al desarrollo econ√≥mico?

**Medio ambiente y √°reas urbanas**&lt;br&gt;¬øLos pobres reciben beneficios sustanciales de la limpieza del medio ambiente?

**Salud, crimen y derecho**&lt;br&gt;¬øLas leyes de control de armas realmente reducen la violencia armada?

---
name: faq2

## Pregunta frecuente.sub[2]: ¬øCu√°l es el experimento ideal para esta situaci√≥n?

Describir el *experimento ideal* nos ayuda a formular

- las .pink[preguntas causales exactas]

- las dimensiones que queremos .pink[manipular]

- los factores que necesitamos .pink[mantener constantes]

--

üöß Estos *experimentos ideales* suelen ser hipot√©ticos, pero si no puedes describir el ideal, probablemente ser√° dif√≠cil obtener datos y dise√±os de investigaci√≥n plausibles en la vida real.

--

Angrist y Pischke llaman preguntas sin experimentos ideales "preguntas fundamentalmente sin respuesta".

---

## Pregunta frecuente.sub[2]: ¬øCu√°l es el experimento ideal para esta situaci√≥n?

*Ejemplos de preguntas potencialmente respondibles...*

- **El efecto de la educaci√≥n en los salarios:** Asignar al azar becas o incentivos para permanecer en el sistema educativo.
- **Democracia y desarrollo:** Asignar arbitrariamente tipos institucionales a los pa√≠ses al obtener su independencia.
- **Limpieza del medio ambiente:** Pedir a la Secretar√≠a de Medio Ambiente que limpie aleatoriamente sitios t√≥xicos.
- **Leyes de control de armas:** Asignar restricciones de armas aleatoriamente a cuadrantes.

--

*Ejemplos de preguntas desafiantes de responder (¬øpotencialmente sin respuesta?)...*

- ¬øC√≥mo afecta el g√©nero a las trayectorias profesionales futuras?
- ¬øQu√© papel juega la raza en los salarios de una persona?

---

## Pregunta frecuente.sub[2]: ¬øCu√°l es el experimento ideal para esta situaci√≥n?

A veces, incluso preguntas que parecen simples resultan ser fundamentalmente sin respuesta.

*Ejemplo de una pregunta fundamentalmente sin respuesta*:
&gt; ¬øLos ni√±os tienen un mejor rendimiento al comenzar la escuela a una edad m√°s avanzada?

--

**Propuesta de experimento ideal**

1. Asignar al azar a los ni√±os para comenzar el 1.er grado a los 6 o 7 a√±os.
2. Comparar los resultados de las pruebas en el 2.¬∫ grado.

--

.hi[Problema]
--
Los ni√±os mayores tienen un mejor rendimiento. ¬øQueremos medir el efecto de comenzar m√°s tarde o simplemente de ser mayor?

---



# Conceptos Importantes

### El Contrafactual

¬øCu√°l habr√≠a sido el resultado para los participantes si NO hubieran participado en √©l?

---

## El Contrafactual

.pull-left[
.b.blue[Participante]
&lt;img src="img/ninas1.png" width="40%" style="display: block; margin: auto;" /&gt;
  `\(Y_1 \Rightarrow\)` RESULTADO OBSERVADO
]
.pull-right[
.b.blue[No Participante]
&lt;img src="img/ninas1.png" width="40%" style="display: block; margin: auto;" /&gt;
 `\(Y_0 \Rightarrow\)` RESULTADO DEL CONTRAFACTUAL
 ]

---

## Resultados Potenciales

Para cada individuo, tenemos DOS resultados potenciales:

- `\(Y_i(D=0)\)`: resultado si `\(i\)` NO recibe el tratamiento
- `\(Y_i(D=1)\)`: resultado si `\(i\)` recibe el tratamiento

---

## Resultados Potenciales: Ejemplo 1

Carolina tiene una pierna rota. Tratamiento: `\(D=0\)` No ir al hospital, `\(D=1\)` Ir al hospital

- `\(Y_i(D=0)\)`: si ella no va al hospital, su pierna no se recupera
- `\(Y_i(D=1)\)`: si ella va al hospital, su pierna no se recupera

---

## Resultados Potenciales: Ejemplo 2

Camila tiene una pierna rota. Tratamiento: `\(D=0\)` No ir al hospital, `\(D=1\)` Ir al hospital

- `\(Y_i(D=0)\)`: si ella no va al hospital, su pierna no se recupera
- `\(Y_i(D=1)\)`: si ella va al hospital, su pierna se recupera

---

## Resultados Potenciales: Ejemplo 3

M√≥nica tiene una pierna rota. Tratamiento: `\(D=0\)` No ir al hospital, `\(D=1\)` Ir al hospital

- `\(Y_i(D=0)\)`: si ella no va al hospital, su pierna se recupera
- `\(Y_i(D=1)\)`: si ella va al hospital, su pierna no se recupera

---

## Problema Fundamental de Inferencia Causal

Nunca observamos los dos resultados potenciales para el mismo individuo. Crea un problema de datos no observados (missing data) al comparar tratados con los controles.

---

## Resultado Observado

Nosotros solo observamos uno de los resultados potenciales. Nuestra variable `\(Y_i\)`:

`$$Y_i = \begin{cases}
  Y_i(D=0) &amp; \text{si } D_i = 0 \\
  Y_i(D=1) &amp; \text{si } D_i = 1 \\
\end{cases}$$`

Donde `\(D_i\)` es el indicador de tratamiento (es igual a 1 si fue tratado).

---

## Establecer Causalidad

En el mundo ideal (para los investigadores), podr√≠amos clonar a cada individuo tratado y observar los impactos del tratamiento en los resultados de inter√©s.

.pull-left[
.b.blue[Tratado]
&lt;img src="img/ninas1.png" width="40%" style="display: block; margin: auto;" /&gt;
  `\(Y_1 \Rightarrow\)` RESULTADO OBSERVADO
]
.pull-right[
.b.blue[Control]
&lt;img src="img/ninas1.png" width="40%" style="display: block; margin: auto;" /&gt;
 `\(Y_0 \Rightarrow\)` RESULTADO DEL CONTRAFACTUAL
 ]

---

---

## Video Mastering Metrics

[Ver video](https://youtu.be/iPBV3BlV7jk)

---
---
class: center, middle, inverse

## Ceteris Paribus

### Todos los dem√°s factores permanecen constantes

---

## Establecer Causalidad

- Nosotros nunca observamos el contrafactual
- Soluciones
  - Buscar una persona similar en todas las caracter√≠sticas
  - Diferencias de medias de grupos (na√Øve --&gt; Sesgo de Selecci√≥n)
  - Diferencias antes y despu√©s (na√Øve --&gt; Sesgo de maduraci√≥n)
---

## Soluci√≥n 1. Buscar una persona similar 

**Ceteris Paribus: ¬øPERFECTO?**

.pull-left[ **Tratada** 
&lt;img src="img/ninas1.png" width="40%" style="display: block; margin: auto;" /&gt;
- `\(Y_{1} \Rightarrow\)` RESULTADO OBSERVADO
]

.pull-right[ **Control** 
&lt;img src="img/ninas3.png" width="35%" style="display: block; margin: auto;" /&gt;
- `\(Y_{0} \Rightarrow\)` RESULTADO DEL CONTRAFACTUAL
]

---

## Efecto promedio del tratamiento (Average Treatment Effect- ATE)

`$$ATE = E[\tau] = E[Y_i(D=1) - Y_i(D=0)]$$`
Si no observamos los resultados potenciales para cada individuo, mucho menos para un grupo de individuos.

---

## Soluci√≥n 2: Diferencia de Medias= Efecto Causal + Sesgo de Selecci√≥n

.pull-left[ **Tratados** 
&lt;img src="img/pegado3.png" width="40%" style="display: block; margin: auto;" /&gt;
]

.pull-right[ **Controles** 
&lt;img src="img/pegado4.png" width="40%" style="display: block; margin: auto;" /&gt;
]
---
---

## SESGO DE SELECCI√ìN

Hay diferencias sistem√°ticas entre los grupos comparados de un estudio.

---

## Sesgo de Selecci√≥n

Incluso en una muestra grande:

- Las personas eligen participar en un programa cuando esperan tener beneficios de √©l `\((Y_i(D=1)-Y_i(D=0)\)`
- Es probable que las personas que eligen participar sean diferentes a las que deciden no hacerlo ... incluso en ausencia del tratamiento.

---

## Soluci√≥n 3: Diferencias Antes-Despu√©s = Efecto Causal + Efecto de Maduraci√≥n

Comparaciones antes-despu√©s asumen que no hay tendencia en la variable de resultado.

---

## COMPARACIONES PROHIBIDAS

- Tratados vs Controles
- Pre-tratamiento vs Post-tratamiento

Se requieren supuestos extremadamente fuertes (l√©ase: imposibles de cumplir en la realidad) para que cualquiera de estos dos enfoques podamos obtener efectos causales.

---

## ¬øY Entonces?

.pull-left[
&lt;img src="img/simon1.jpeg" width="60%" style="display: block; margin: auto;" /&gt;
.fuente[ fuente: @banrepcultural]
]


---

## ¬øC√≥mo podemos estimar efectos causales?

**Experimentos Controlados**
- Asignaci√≥n aleatoria al tratamiento

**M√©todos Cuasi-Experimentales**
- Diferencias en Diferencias
- Emparejamiento
- Variables Instrumentales
- Regresi√≥n Discontinua
- Funci√≥n de Control
- Controles Sint√©ticos
- Causal Machine Learning



---
class: center, middle

# Gracias!

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "18:12",
"slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">\n  </div>\n</div>   \n"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
